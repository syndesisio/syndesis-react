(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{702:function(t,e,n){"use strict";n.r(e);var r=n(5),i=n(6),a=n(9),o=n(7),s=n(8),c=n(0),l=n(169),u=n(107),d=n(333),g=n(114),m=n(10),p=n(3),h=n(4),f=n(16),C=n(172),b=n(17),E=n(28);function I(t){return 0!==t.updatedAt?t.updatedAt:t.createdAt}function v(t,e){var n=I(t)||0;return(I(e)||0)-n}function T(t){return"/connections/".concat(t.id)}var k=function(){return c.createElement(m.WithMonitoredIntegrations,null,function(t){var e=t.data,n=t.hasData;return c.createElement(m.WithIntegrationsMetrics,null,function(t){var r=t.data;return c.createElement(m.WithConnections,null,function(t){var i=t.data,a=t.hasData,o=e.items.reduce(function(t,e){var n=t[e.integration.currentState]||0;return Object(g.a)({},t,Object(d.a)({},e.integration.currentState,n+1))},{Error:0,Pending:0,Published:0,Unpublished:0}),s=function(t){return t.map(function(t){return t.integration}).sort(v).slice(0,5)}(e.items),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(e).map(function(t){return{count:e[t],id:t}}).sort(function(t,e){return e.count-t.count});return t.sort(function(t,e){return v(t.integration,e.integration)}).sort(function(t,e){var r=n.findIndex(function(t){return t.id===e.integration.id});return-1===r?n.length+1:r}).reverse().slice(0,5)}(e.items,r.topIntegrations);return c.createElement(f.b,{ns:["dashboard","integrations","shared"]},function(t){return c.createElement(p.Dashboard,{linkToIntegrations:E.a.integrations.list(),linkToIntegrationCreation:E.a.integrations.create.start.selectConnection(),linkToConnections:E.a.connections.connections(),linkToConnectionCreation:E.a.connections.create.selectConnector(),integrationsOverview:c.createElement("div",{"data-testid":"total-integrations"},c.createElement(p.AggregatedMetricCard,{title:t("titleTotalIntegrations",{count:e.totalCount}),ok:e.totalCount-o.Error,error:o.Error})),connectionsOverview:c.createElement("div",{"data-testid":"total-connections"},c.createElement(p.ConnectionsMetric,{i18nTitle:t("titleTotalConnections",{count:i.connectionsForDisplay.length})})),messagesOverview:c.createElement("div",{"data-testid":"total-messages"},c.createElement(p.AggregatedMetricCard,{title:t("titleTotalMessages",{count:r.messages}),ok:r.messages-r.errors,error:r.errors})),uptimeOverview:c.createElement(p.UptimeMetric,{start:parseInt(r.start,10),i18nTitle:t("titleUptimeMetric")}),topIntegrations:c.createElement(p.TopIntegrationsCard,{i18nTitle:t("titleTopIntegrations",{count:5}),i18nLast30Days:t("lastNumberOfDays",{numberOfDays:30}),i18nLast60Days:t("lastNumberOfDays",{numberOfDays:60}),i18nLast90Days:t("lastNumberOfDays",{numberOfDays:90})},c.createElement(b.e,{error:!1,loading:!n,integrations:l})),integrationBoard:c.createElement(p.IntegrationBoard,{runningIntegrations:o.Published,pendingIntegrations:o.Pending,stoppedIntegrations:o.Unpublished,i18nTitle:t("titleIntegrationBoard"),i18nIntegrationStatePending:t("integrationStatePending"),i18nIntegrationStateRunning:t("integrationStateRunning"),i18nIntegrationStateStopped:t("integrationStateStopped"),i18nIntegrations:t("shared:Integrations"),i18nTotal:t("shared:Total")}),integrationUpdates:c.createElement(p.RecentUpdatesCard,{i18nTitle:t("titleIntegrationUpdates")},c.createElement(h.WithLoader,{error:!1,loading:!n,loaderChildren:c.createElement(p.RecentUpdatesSkeleton,null),errorChildren:c.createElement("div",null,"TODO")},function(){return s.map(function(e){return c.createElement(p.RecentUpdatesItem,{key:e.id,integrationName:e.name,integrationCurrentState:e.currentState,integrationDate:e.updatedAt||e.createdAt,i18nError:t("shared:Error"),i18nPublished:t("shared:Published"),i18nUnpublished:t("shared:Unpublished")})})})),connections:c.createElement(C.a,{error:!1,loading:!a,connections:i.connectionsForDisplay,getConnectionHref:T}),i18nConnections:t("shared:Connections"),i18nLinkCreateConnection:t("shared:linkCreateConnection"),i18nLinkCreateIntegration:t("shared:linkCreateIntegration"),i18nLinkToConnections:t("linkToConnections"),i18nLinkToIntegrations:t("linkToIntegrations"),i18nTitle:t("title")})})})})})};n.d(e,"default",function(){return O});var O=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return c.createElement(l.a,null,c.createElement(u.a,{path:this.props.baseurl,exact:!0,component:k}))}}]),e}(c.Component)}}]);
//# sourceMappingURL=Dashboard.2726b8cd.chunk.js.map